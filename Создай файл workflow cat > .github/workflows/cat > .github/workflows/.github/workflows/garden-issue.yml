# ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸ Ð² Ð¿Ð°Ð¿ÐºÑƒ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ
cd zero-channel-manifesto

# Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ð¿Ð°Ð¿ÐºÑƒ Ð´Ð»Ñ workflows
mkdir -p .github/workflows

# Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ñ„Ð°Ð¹Ð» workflow
cat > .github/workflows/garden-issue.yml << 'EOF'
name: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Issue Ð´Ð»Ñ ÑÐ°Ð´Ð°

on:
  workflow_dispatch:
    inputs:
      plant:
        description: 'ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ñ'
        required: true
        type: string
      note:
        description: 'Ð—Ð°Ð¼ÐµÑ‚ÐºÐ° Ð¾ Ñ€Ð¾ÑÑ‚Ðµ'
        required: true
        type: string
      date:
        description: 'Ð”Ð°Ñ‚Ð° Ð¿Ð¾ÑÐ°Ð´ÐºÐ¸'
        required: true
        type: string

jobs:
  create-garden-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ Issue Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÐµÐ¹ Ð¾ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ð¸
        run: |
          curl -X POST \
          -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
          -H "Accept: application/vnd.github.v3+json" \
          https://api.github.com/repos/${{ github.repository }}/issues \
          -d '{
            "title": "ðŸŒ± ${{ github.event.inputs.plant }} (${{ github.event.inputs.date }})",
            "body": "**Ð”Ð°Ñ‚Ð°:** ${{ github.event.inputs.date }}\n\n**Ð Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ:** ${{ github.event.inputs.plant }}\n\n**Ð—Ð°Ð¼ÐµÑ‚ÐºÐ°:** ${{ github.event.inputs.note }}\n\n---\n\n_Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾ Ñ‡ÐµÑ€ÐµÐ· Ñ„Ð¾Ñ€Ð¼Ñƒ Â«Ð¡Ð°Ð´ â†’ ÐšÐ¾Ð´Â»_",
            "labels": ["ÑÐ°Ð´", "Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ", "Ñ€Ð¾ÑÑ‚"],
            "assignees": ["v4g7yz29g7-coder"]
          }'
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
EOF
